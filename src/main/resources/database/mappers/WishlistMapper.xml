<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- mapper namespace는 비우면 에러 -->
<mapper namespace="com.winter.app.wishlist.WishlistDAO">

 	<insert id="setAdd" parameterType="AccountDTO">
 		INSERT INTO WISHLIST(PRODUCTNUM, USERNAME) VALUES(#{productNum},#{userName})
 	</insert>

	<resultMap type="ProductDTO" id="listResult">
		<id column="PRODUCTNUM" property="productNum" />
		<result column="PRODUCTNAME" property="productName" />
		<result column="PRODUCTCONTENTS" property="productContents" />
		<result column="PRODUCTRATE" property="productRate" />
		<result column="PRODUCTJUMSU" property="productJumsu" />
		<result column="PRODUCTCOUNT" property="productCount" />
		<result column="PRODUCTSALE" property="productSale" />
		<collection property="accountDTOs" javaType="List"
			ofType="AccountDTO">
			<id column="ACCOUNTNUM" property="accountNum" />
			<result column="USERNAME" property="userName" />
			<result column="PRODUCTNUM" property="productNum" />
			<result column="ACCOUNTPW" property="accountPW" />
			<result column="ACCOUNTDATE" property="accountDate" />
			<result column="ACCOUNTBALANCE" property="accountBalance" />
		</collection>
	</resultMap>

  	<select id="getList" resultType="ProductDTO" parameterType="MemberDTO" >
		SELECT *
		FROM WISHLIST W
		INNER JOIN
		product p
		using(productNum)
		where userName=#{userName}
	</select>

	<delete id="setDelete" parameterType="Map">
	DELETE WISHLIST 
	WHERE 
	PRODUCTNUM IN
	<!-- nums꺼내면 productNum배열이 나옴  배열을 나온걸 item으로 담음-->
	<foreach collection="nums" item="n" open="(" separator="," close=")">
	#{n}
	</foreach>
	AND userName=#{member.userName}
	</delete>


</mapper>